import{r as x,j as e,a as j}from"./app-DE_R_iJl.js";const S=({messages:c,isLoading:d,theme:s="glassmorphism"})=>{const t=x.useRef(null);x.useEffect(()=>{h()},[c,d]);const h=()=>{var i;(i=t.current)==null||i.scrollIntoView({behavior:"smooth"})},o=i=>new Date(i).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),n=(i,u)=>{const a=i.role==="user",b=s==="glassmorphism"?"glassmorphism":"";return e.jsxs("div",{className:`flex ${a?"justify-end":"justify-start"} mb-4 message-appear`,children:[e.jsxs("div",{className:`${a?"order-2 max-w-[85%] min-w-[200px] w-auto":"order-1 max-w-[80%]"}`,children:[!a&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-2 ${s==="glassmorphism"?"backdrop-blur-lg bg-gradient-to-r from-violet-500/30 to-blue-500/30":"bg-blue-500"}`,children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7 12H3a1 1 0 01-1-1V6a1 1 0 011-1h16a1 1 0 011 1v5a1 1 0 01-1 1h-4"})})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AI Assistant"})]}),e.jsxs("div",{className:`message-bubble ${a?"user":"assistant"} ${b} px-4 py-3 ${s==="glassmorphism"?"":a?"bg-blue-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[e.jsx("p",{className:`text-sm whitespace-pre-wrap ${s==="glassmorphism"?a?"text-white":"text-gray-800 dark:text-gray-100":a?"text-white":"text-gray-800"}`,children:i.content}),e.jsx("p",{className:`text-xs mt-1 ${s==="glassmorphism"?a?"text-white/70":"text-gray-600 dark:text-gray-400":a?"text-blue-100":"text-gray-500"}`,children:o(i.created_at)})]})]}),a&&e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ml-2 order-1 ${s==="glassmorphism"?"backdrop-blur-sm bg-white/10 dark:bg-black/10":"bg-gray-300"}`,children:e.jsx("svg",{className:`w-4 h-4 ${s==="glassmorphism"?"text-white dark:text-gray-300":"text-gray-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]},i.id||u)},r=()=>e.jsx("div",{className:"flex justify-start mb-4",children:e.jsxs("div",{className:"max-w-[80%]",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-2 ${s==="glassmorphism"?"backdrop-blur-lg bg-gradient-to-r from-violet-500/30 to-blue-500/30 animate-pulse":"bg-blue-500 animate-pulse"}`,children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7 12H3a1 1 0 01-1-1V6a1 1 0 011-1h16a1 1 0 011 1v5a1 1 0 01-1 1h-4"})})}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"AI Assistant"})]}),e.jsx("div",{className:`typing-indicator ${s==="glassmorphism"?"glassmorphism":"bg-gray-100"}`,children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${s==="glassmorphism"?"bg-gray-500 dark:bg-gray-400":"bg-gray-400"}`,style:{animationDelay:"0ms"}}),e.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${s==="glassmorphism"?"bg-gray-500 dark:bg-gray-400":"bg-gray-400"}`,style:{animationDelay:"150ms"}}),e.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${s==="glassmorphism"?"bg-gray-500 dark:bg-gray-400":"bg-gray-400"}`,style:{animationDelay:"300ms"}})]})})]})});return e.jsxs("div",{className:`flex-1 overflow-y-auto p-4 chat-messages ${s==="glassmorphism"?"":"bg-gray-50"}`,onWheel:i=>{i.stopPropagation()},style:{height:"100%",maxHeight:"100%",overflowY:"auto"},children:[c.length===0?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[e.jsx("svg",{className:`w-12 h-12 mx-auto mb-4 ${s==="glassmorphism"?"text-gray-400 dark:text-gray-500":"text-gray-300"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("p",{children:"Start a conversation"}),e.jsx("p",{className:"text-sm",children:"Ask anything and I'll be happy to help!"})]})}):e.jsxs(e.Fragment,{children:[c.map(n),d&&e.jsx(r,{})]}),e.jsx("div",{ref:t})]})},D=({onSendMessage:c,disabled:d=!1,theme:s="glassmorphism"})=>{const[t,h]=x.useState(""),o=x.useRef(null),n=a=>{a.preventDefault(),t.trim()&&!d&&(c(t),h(""),o.current.style.height="auto")},r=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),n(a))},i=a=>{h(a.target.value),o.current.style.height="auto",o.current.style.height=Math.min(o.current.scrollHeight,120)+"px"},u=s==="glassmorphism"?"glassmorphism":"";return e.jsxs("div",{className:`${s==="glassmorphism"?"":"border-t border-gray-200 bg-white"} p-4`,children:[e.jsx("style",{jsx:!0,children:`
                .no-focus-ring textarea:focus {
                    outline: none !important;
                    border: none !important;
                    box-shadow: none !important;
                    ring: none !important;
                }
                .no-focus-ring *:focus {
                    outline: none !important;
                    border: none !important;
                    box-shadow: none !important;
                    ring: none !important;
                }
            `}),e.jsx("form",{onSubmit:n,className:"w-full",children:e.jsxs("div",{className:`relative chat-input-container no-focus-ring ${u} ${s==="glassmorphism"?"":"border border-gray-300 rounded-lg"}`,children:[e.jsx("textarea",{ref:o,value:t,onChange:i,onKeyDown:r,placeholder:"Type your message...",className:`chat-input-field resize-none w-full no-outline no-border no-ring ${d?"cursor-not-allowed":""} ${s==="glassmorphism"?"":"px-3 py-2 pr-12 text-sm bg-white"}`,disabled:d,rows:1,style:{minHeight:"40px",maxHeight:"120px",outline:"none",border:"none",boxShadow:"none"}}),t.length>0&&e.jsxs("div",{className:`absolute bottom-1 right-12 text-xs ${s==="glassmorphism"?"text-gray-500 dark:text-gray-400":"text-gray-400"}`,children:[t.length,"/5000"]}),e.jsx("button",{type:"submit",disabled:!t.trim()||d,className:`send-button ${u} absolute right-2 bottom-2 transition-all flex items-center justify-center ${t.trim()&&!d?`${s==="glassmorphism"?"text-white":"bg-blue-600 text-white hover:bg-blue-700"} transform hover:scale-105`:`${s==="glassmorphism"?"text-gray-400 cursor-not-allowed backdrop-blur-sm bg-gray-200/30":"bg-gray-200 text-gray-400 cursor-not-allowed"}`} ${s==="glassmorphism"?"":"rounded-lg"}`,style:{width:"36px",height:"36px"},children:d?e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),e.jsxs("div",{className:`mt-2 text-xs flex items-center justify-between ${s==="glassmorphism"?"text-gray-500 dark:text-gray-400":"text-gray-500"}`,children:[e.jsx("span",{children:"Press Enter to send, Shift+Enter for new line"}),d&&e.jsx("span",{className:`${s==="glassmorphism"?"text-purple-400 dark:text-purple-300":"text-blue-500"} animate-pulse`,children:"AI is thinking..."})]})]})},E=({conversations:c,currentConversation:d,onSelectConversation:s,onNewConversation:t,onDeleteConversation:h,isOpen:o,onToggle:n,theme:r="glassmorphism"})=>{const[i,u]=x.useState(null),a=l=>{i===l?(h(l),u(null)):u(l)},b=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});if(!o)return null;const f=r==="glassmorphism"?"glassmorphism chat-sidebar":"";return e.jsxs("div",{className:`w-80 flex flex-col animate-slide-right ${r==="glassmorphism"?f:"bg-gray-50 border-r border-gray-200"}`,children:[e.jsxs("div",{className:`p-4 ${r==="glassmorphism"?"":"border-b border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:`font-semibold ${r==="glassmorphism"?"text-gray-800 dark:text-white":"text-gray-800"}`,children:"Conversations"}),e.jsx("button",{onClick:n,className:`p-1 rounded transition-colors ${r==="glassmorphism"?"hover:bg-white/10 dark:hover:bg-black/10":"hover:bg-gray-200"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("button",{onClick:t,className:`new-chat-button w-full mt-3 px-3 py-2 rounded-lg transition-colors flex items-center justify-center ${r==="glassmorphism"?"text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chat"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:c.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Start a new chat"})]}):e.jsx("div",{className:"p-2",children:c.map(l=>e.jsx("div",{className:`conversation-item relative cursor-pointer transition-all ${(d==null?void 0:d.id)===l.id?`active ${r==="glassmorphism"?"":"bg-blue-50 border-blue-200"}`:`${r==="glassmorphism"?"":"bg-white border-gray-100"}`} ${r==="glassmorphism"?"glassmorphism":"border"}`,onClick:()=>s(l),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:`font-medium truncate ${r==="glassmorphism"?"text-gray-800 dark:text-white":"text-gray-800"}`,children:l.title||"New Conversation"}),e.jsx("p",{className:`text-xs mt-1 ${r==="glassmorphism"?"text-gray-500 dark:text-gray-400":"text-gray-500"}`,children:b(l.updated_at)}),l.messages&&l.messages.length>0&&e.jsx("p",{className:`text-sm mt-1 truncate ${r==="glassmorphism"?"text-gray-600 dark:text-gray-300":"text-gray-600"}`,children:l.messages[l.messages.length-1].content})]}),e.jsx("button",{onClick:y=>{y.stopPropagation(),a(l.id)},className:`ml-2 p-1 rounded transition-colors ${i===l.id?"bg-red-100 text-red-600 hover:bg-red-200":`${r==="glassmorphism"?"bg-white/10 text-gray-500 hover:bg-red-100/20 hover:text-red-500 dark:bg-black/10 dark:text-gray-400 dark:hover:bg-red-900/20":"bg-gray-100 text-gray-500 hover:bg-red-100 hover:text-red-600"}`}`,children:i===l.id?e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},l.id))})})]})},W=({isOpen:c,onClose:d,position:s="bottom-right",theme:t="glassmorphism"})=>{const[h,o]=x.useState([]),[n,r]=x.useState(null),[i,u]=x.useState([]),[a,b]=x.useState(!1),[f,l]=x.useState(!1),y=x.useRef(null),k={"bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-right":"top-4 right-4","top-left":"top-4 left-4"};x.useEffect(()=>{c&&N()},[c]),x.useEffect(()=>{n&&$(n.id)},[n]);const N=async()=>{try{const g=await j.get("/chat/conversations");o(g.data),g.data.length===0?await w():r(g.data[0])}catch(g){console.error("Error loading conversations:",g)}},$=async g=>{try{const m=await j.get(`/chat/conversations/${g}`);u(m.data.messages||[])}catch(m){console.error("Error loading messages:",m)}},w=async()=>{try{const m=(await j.post("/chat/conversations")).data;o(p=>[m,...p]),r(m),u([]),l(!1)}catch(g){console.error("Error creating conversation:",g)}},C=async g=>{if(n||await w(),!!g.trim()){b(!0);try{const m=await j.post(`/chat/conversations/${n.id}/messages`,{message:g});u(p=>[...p,m.data.user_message,m.data.assistant_message]),o(p=>p.map(v=>v.id===n.id?m.data.conversation:v))}catch(m){console.error("Error sending message:",m)}finally{b(!1)}}},M=async g=>{try{if(await j.delete(`/chat/conversations/${g}`),o(m=>m.filter(p=>p.id!==g)),n&&n.id===g){const m=h.filter(p=>p.id!==g);m.length>0?r(m[0]):await w()}}catch(m){console.error("Error deleting conversation:",m)}};if(!c)return null;const L=t==="glassmorphism"?"glassmorphism":"";return e.jsx("div",{className:`fixed ${k[s]} z-50 chat-container ${L} ${c?"animate-slide-up":""}`,ref:y,children:e.jsxs("div",{className:"overflow-hidden flex",children:[e.jsx(E,{conversations:h,currentConversation:n,onSelectConversation:r,onNewConversation:w,onDeleteConversation:M,isOpen:f,onToggle:()=>l(!f),theme:t}),e.jsxs("div",{className:"flex flex-col w-96 h-[500px]",children:[e.jsxs("div",{className:`chat-header text-white p-4 flex items-center justify-between ${t==="glassmorphism"?"":"bg-blue-600"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>l(!f),className:`mr-3 p-1 rounded transition-colors ${t==="glassmorphism"?"hover:bg-white/10":"hover:bg-blue-700"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"AI Assistant"}),e.jsx("p",{className:`text-sm ${t==="glassmorphism"?"text-white/70":"text-blue-100"}`,children:"Online"})]})]}),e.jsx("button",{onClick:d,className:`p-1 rounded transition-colors ${t==="glassmorphism"?"hover:bg-white/10":"hover:bg-blue-700"}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(S,{messages:i,isLoading:a,theme:t}),e.jsx(D,{onSendMessage:C,disabled:a,theme:t})]})]})})},A=({position:c="bottom-right",size:d="medium",hasNotification:s=!1,onClick:t,theme:h="glassmorphism"})=>{const[o,n]=x.useState(!1),r={"bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-right":"top-4 right-4","top-left":"top-4 left-4"},i={small:"w-12 h-12",medium:"w-14 h-14",large:"w-16 h-16"},u={small:"w-5 h-5",medium:"w-6 h-6",large:"w-7 h-7"},a=h==="glassmorphism"?"glassmorphism chat-toggle-button":"";return e.jsxs("button",{className:`fixed ${r[c]} ${i[d]} ${a} ${h==="glassmorphism"?"text-white rounded-full shadow-2xl transition-all duration-300 focus:outline-none z-50 group":"bg-blue-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-blue-300 z-50 group"}`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:b=>{b.preventDefault(),console.log("Chat button clicked!"),t&&t()},children:[s&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full border-2 border-white animate-pulse"}),e.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[e.jsx("svg",{className:`${u[d]} transition-transform duration-300 ${o?"scale-110":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),e.jsx("div",{className:`absolute inset-0 rounded-full ${h==="glassmorphism"?"bg-white opacity-0 group-hover:opacity-5":"bg-white opacity-0 group-hover:opacity-10"} transition-opacity duration-300`})]}),e.jsxs("div",{className:`absolute ${c.includes("right")?"right-full mr-3":"left-full ml-3"} top-1/2 transform -translate-y-1/2 ${h==="glassmorphism"?"backdrop-blur-md bg-black/70 text-white":"bg-gray-900 text-white"} text-sm px-3 py-1 rounded-lg whitespace-nowrap opacity-0 ${o?"opacity-100":""} transition-opacity duration-200 pointer-events-none`,children:["Chat with AI",e.jsx("div",{className:`absolute ${c.includes("right")?"left-full":"right-full"} top-1/2 transform -translate-y-1/2 w-0 h-0 border-t-2 border-b-2 border-transparent ${c.includes("right")?`border-l-2 ${h==="glassmorphism"?"border-l-black/70":"border-l-gray-900"}`:`border-r-2 ${h==="glassmorphism"?"border-r-black/70":"border-r-gray-900"}`}`})]})]})},B=({position:c="bottom-right",size:d="medium",autoOpen:s=!1,showNotification:t=!1,theme:h="glassmorphism"})=>{const[o,n]=x.useState(s),[r,i]=x.useState(t);x.useEffect(()=>{o&&i(!1)},[o]);const u=()=>{console.log("Toggle chat:",!o),n(!o)};return e.jsxs(e.Fragment,{children:[e.jsx(W,{isOpen:o,onClose:()=>{console.log("Closing chat"),n(!1)},position:c,theme:h}),!o&&e.jsx(A,{position:c,size:d,hasNotification:r,onClick:u,theme:h})]})},z=()=>e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Chat System Demo"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"The chat widget is now available in the bottom-right corner. You can click on it to start chatting with the AI assistant."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Features"}),e.jsxs("ul",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:"✅ Real-time AI chat"}),e.jsx("li",{children:"✅ Multiple conversations"}),e.jsx("li",{children:"✅ Message history"}),e.jsx("li",{children:"✅ Responsive design"}),e.jsx("li",{children:"✅ Smooth animations"}),e.jsx("li",{children:"✅ Auto-generated titles"})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Usage"}),e.jsxs("ol",{className:"space-y-2 text-gray-600",children:[e.jsx("li",{children:"1. Click the chat button in the corner"}),e.jsx("li",{children:"2. Type your message"}),e.jsx("li",{children:"3. Press Enter to send"}),e.jsx("li",{children:"4. Wait for AI response"}),e.jsx("li",{children:"5. Continue the conversation"})]})]})]})]}),e.jsx(B,{position:"bottom-right",size:"medium",autoOpen:!1,showNotification:!1})]});export{z as default};
